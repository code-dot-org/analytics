version: 2

models: 
  - name: dim_course_activity
    description: This model is a log of all user (students and teachers) course activity within a school year.

    columns:
    - name: user_id
      description: the unique ID associated with the activity
      tests:
        - not_null
        - unique
    
    - name: school_year
      description: the school year in which the course activity was in
      tests:
        - not_null 
        
    - name: course_name
      description: the course associated with the individual users's activity in a given school year
      tests: 
        - not_null 
    
    - name: first_activity_at
      description: timestamp of the user's first activity within the given course and school year- this field is later used to determine when a section/school first started teaching
    
    - name: last_activity_at 
      description: timestamp of the user's latest activity within the given course and school year

  - name: dim_users 
    description: 1 row per user + user_geos; student_id, teacher_id fields
    columns: 
      - name: user_id
        description: UID for eah user
        tests: 
          - not_null
          - unique
          
      - name: student_id 
        description: UID for each student
        tests: 
            - unique
      
      - name: teacher_id 
        description: UID for each teacher
        tests: 
            - unique

  # - name: dim_user_stages
  #   description: 1 row for every time a user has activity within a stage, aggregates number of levels touched within stage
  #   tests:
  #   - dbt_utils.unique_combination_of_columns:
  #         combination_of_columns:
  #           - user_id
  #           - course_id
  #           - script_id
  #           - stage_id